version: "3.2"

services:
  master:
    image: 127.0.0.1:5000/master
    deploy:
      replicas: 1
      placement:
        constraints:
          - node.role == manager
    environment:
      CASSANDRA_INITIAL_TOKEN: 1000000000000000
    depends_on:
      - worker1
    networks:
      janusgraph-network:
        aliases:
          - '{{.Service.Name}}-{{.Task.Slot}}'

networks:
  janusgraph-network:
    driver: overlay

volumes:
  datasets:
    driver: local
    driver_opts:
      type: "none"
      o: "bind"
      device: "/home/apacaci/datasets"
  results:
    driver: local
    driver_opts:
      type: "none"
      o: "bind"
      device: "/home/apacaci/sgp-framework/janusgraph-cluster-results"
  parameters:
    driver: local
    driver_opts:
      type: "none"
      o: "bind"
      device: "/home/apacaci/sgp-framework/streaming-graph-partitioning/containers/interactive/parameters"
